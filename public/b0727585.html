<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>白话比特币与区块链 | Jitwxs</title><meta name="keywords" content="区块链,比特币"><meta name="author" content="Jitwxs"><meta name="copyright" content="Jitwxs"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="都 9102 年了，连大大都发话要大力发展区块链技术，还不来赶紧了解下区块链知识吗。本篇文章主要是科普向，建立对比特币和区块链的基本认知。  一、比特币诞生 2008 年在世界金融危机的大背景下，有一个化名为中本聪的极客，在互联网上发表了一篇名为《Bitcoin: A Peer-to-Peer Electronic Cash System》 的文章。他在这篇文章中提出了设计一种去中心化的电子记账系">
<meta property="og:type" content="article">
<meta property="og:title" content="白话比特币与区块链">
<meta property="og:url" content="https://jitwxs.cn/b0727585.html">
<meta property="og:site_name" content="Jitwxs">
<meta property="og:description" content="都 9102 年了，连大大都发话要大力发展区块链技术，还不来赶紧了解下区块链知识吗。本篇文章主要是科普向，建立对比特币和区块链的基本认知。  一、比特币诞生 2008 年在世界金融危机的大背景下，有一个化名为中本聪的极客，在互联网上发表了一篇名为《Bitcoin: A Peer-to-Peer Electronic Cash System》 的文章。他在这篇文章中提出了设计一种去中心化的电子记账系">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover13.jpg">
<meta property="article:published_time" content="2019-11-04T15:15:20.000Z">
<meta property="article:modified_time" content="2020-12-26T13:52:06.964Z">
<meta property="article:author" content="Jitwxs">
<meta property="article:tag" content="区块链">
<meta property="article:tag" content="比特币">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover13.jpg"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/configuration/favicon.ico"><link rel="canonical" href="https://jitwxs.cn/b0727585"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?053091e29f160d71ed2f65a774cfeac1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-40VH67TNSM"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-40VH67TNSM');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"POGNXMLA2T","apiKey":"2013ebed0f76818838d693c9c40cb1fd","indexName":"blog","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Jitwxs","link":"链接: ","source":"来源: Jitwxs","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"top-right"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-12-26 21:52:06'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Jitwxs" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/configuration/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">224</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">132</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">39</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fas fa-ellipsis-v"></i><span> 更多</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page child" href="/favorites/"><i class="fa-fw fas fa-meteor"></i><span> 收藏夹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://tools.jitwxs.cn"><i class="fa-fw fas fa-tools"></i><span> 工具箱</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-cogs"></i><span> 管理</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/changes/"><i class="fa-fw fas fa-location-arrow"></i><span> 更新日志</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://analytics.google.com/"><i class="fa-fw fab fa-google"></i><span> 谷歌统计</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://tongji.baidu.com/"><i class="fa-fw fas fa-globe-asia"></i><span> 百度统计</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover13.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Jitwxs</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fas fa-ellipsis-v"></i><span> 更多</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page child" href="/favorites/"><i class="fa-fw fas fa-meteor"></i><span> 收藏夹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://tools.jitwxs.cn"><i class="fa-fw fas fa-tools"></i><span> 工具箱</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-cogs"></i><span> 管理</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/changes/"><i class="fa-fw fas fa-location-arrow"></i><span> 更新日志</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://analytics.google.com/"><i class="fa-fw fab fa-google"></i><span> 谷歌统计</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://tongji.baidu.com/"><i class="fa-fw fas fa-globe-asia"></i><span> 百度统计</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">白话比特币与区块链<a class="post-edit-link" href="https://github.com/jitwxs/blog-source/tree/master/source/_posts/白话比特币与区块链.md" title="编辑" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="article-meta"><i class="fas fa-user post-meta-icon"></i><span class="article-meta-label">Jitwxs</span><span class="post-meta-separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2019-11-04T15:15:20.000Z" title="发表于 2019-11-04 23:15:20">2019-11-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-12-26T13:52:06.964Z" title="更新于 2020-12-26 21:52:06">2020-12-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/">区块链</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">5.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>16分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="白话比特币与区块链"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/b0727585.html#post-comment"><span class="gitalk-comment-count"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>都 9102 年了，连大大都发话要大力发展区块链技术，还不来赶紧了解下区块链知识吗。本篇文章主要是科普向，建立对比特币和区块链的基本认知。</p>
<h2 id="一-比特币诞生"><a class="markdownIt-Anchor" href="#一-比特币诞生"></a> 一、比特币诞生</h2>
<p>2008 年在世界金融危机的大背景下，有一个化名为<strong>中本聪</strong>的极客，在互联网上发表了一篇名为<a target="_blank" rel="noopener" href="https://www.baidu.com/link?url=hPAeW2z-4xL3dMKAxXZIVc4dDIqsZXqzz3dvYpk4MO1_0AyC03ZiOw18QiqB2tcF&amp;wd=&amp;eqid=89962a42006e0f38000000035dc0425b">《Bitcoin: A Peer-to-Peer Electronic Cash System》</a> 的文章。他在这篇文章中提出了<strong>设计一种去中心化的电子记账系统</strong>的设想。</p>
<p>我们知道，在当今时代，进行支付最重要的一件事情就是记账。所谓记账，就是要有人记录你的账本的资金变动，例如使用银行卡支付，实际是<strong>由银行进行记账</strong>。银行的背后是中央政府，代表的是国家的信用，我们都信任他，这里的<strong>银行就是一个<code>中心化</code>的电子记账系统</strong>。</p>
<p>**如果这个节点出现了问题，那么我们的资金安全就受到了威胁。**还记得前几天微信支付直接崩掉了，有用户就反馈说付款后商家没有收到，而余额已经扣除的问题。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/posts/201911/20191108013506398.png" alt="" /></p>
<p>中本聪提出的观点就是，我们其实并不需要这个中心化的节点，我们可以<code>去中心化</code>，每一个人的账本都是公开，可被他人查阅的，这就是<strong>去中心化的电子记账系统</strong>。</p>
<p>举个例子来说，假设存在用户 A、B、C，他们之间进行互相支付。A付给B 10块钱，A付款后，A将 A付给B 10块钱这条账单记在自己的账本上，为了让其他人都知道，A 将这条账单记告诉所有人，告诉B，又告诉了 C。过了一会B也要支付，它付给C 5块钱，同时他又把这条账单告诉给了A，告诉了C。</p>
<p>现在这三个用户每个人都收到了两条账单记录，我们会把这两条账单记录进行<strong>打包</strong>，打包后形成一个块，称其为<code>区块</code>。当这个区块被打包完成后，我们再<strong>把这个块链接到以前的交易记录上</strong>，链接成一条链，这条链就叫做<code>区块链</code>。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/posts/201911/20191108015403897.jpg" alt="区块链" /></p>
<p>以上大致就是中本聪所设计的系统，那么这个系统存在几个问题，比如：</p>
<ul>
<li><strong>为什么要去记账？</strong> 凭什么你告诉我的账单记录，我要记录下来，并且打包到链上去呢。</li>
<li><strong>账单以谁为准？</strong> 因为每个人的账单可能不一样的，比如因为网络原因，刚刚的那两条账单记录的先后顺序可能不一样。</li>
<li><strong>如何防伪？</strong> 收到的账单记录可能是伪造的，并不真实存在。</li>
<li><strong>如何防止双重支付（双花问题）？</strong> A只有10块钱，但他同时分别转账给了两个人10块钱。</li>
<li><strong>如何进行保密？</strong> 既然账单都是公开的，那么其他人不就知道你的资产了吗？</li>
</ul>
<h2 id="二-为什么要去记账"><a class="markdownIt-Anchor" href="#二-为什么要去记账"></a> 二、为什么要去记账？</h2>
<p>驱动用户去记账的原因是因为记账有收益，收益包括两个方面：</p>
<p><strong>（1）账单的转账方多交的手续费</strong></p>
<p>比如你正在打的包中，有一条账单是A付给B 10块钱，那么A可能实际支付了 10.5 块钱，多出来的 0.5 块钱也就是给打包者的收益（通俗点说就是支付宝提现到银行卡、银行卡跨行转账时的手续费）。</p>
<p><strong>（2）打包成功后的打包奖励</strong></p>
<p>中本聪在提出这个系统时，建立了一套打包奖励方案。规定<strong>每十分钟打出一个包</strong>，最初的一个包会奖励给打包者 50 个比特币，<strong>每过四年打包奖励减半</strong>。</p>
<p>那么第一个四年的总奖励就是 10512000 比特币。</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>50</mn><mo>∗</mo><mn>6</mn><mo>∗</mo><mn>24</mn><mo>∗</mo><mn>365</mn><mo>∗</mo><mn>4</mn><mo>=</mo><mn>10512000</mn></mrow><annotation encoding="application/x-tex">50 \ast 6 \ast 24 \ast 365 \ast 4 = 10512000
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">6</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">5</span><span class="mord">1</span><span class="mord">2</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span></span></p>
<p>由于每过半年减半，那么可以推算出总的比特币个数约等于2100 万个，比特币就是通过打包奖励这种方式向外扩散出去。</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>10512000</mn><mo>∗</mo><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo>+</mo><msup><mrow><mo stretchy="false">(</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">)</mo></mrow><mn>2</mn></msup><mo>+</mo><mo>…</mo><mo>+</mo><msup><mrow><mo stretchy="false">(</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">)</mo></mrow><mi>n</mi></msup><mo stretchy="false">)</mo><mo>≈</mo><mn>2100</mn><mo stretchy="false">(</mo><mi>t</mi><mi>e</mi><mi>n</mi><mi mathvariant="normal">_</mi><mi>t</mi><mi>h</mi><mi>o</mi><mi>u</mi><mi>s</mi><mi>a</mi><mi>n</mi><mi>d</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">10512000 \ast (1 + \frac{1}{2} + {(\frac{1}{2})}^2 + … + {(\frac{1}{2})}^n) \approx 2100(ten\_thousand)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">5</span><span class="mord">1</span><span class="mord">2</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.211448em;vertical-align:-0.686em;"></span><span class="mord"><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.525448em;"><span style="top:-3.7743400000000005em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.061732em;vertical-align:-0.686em;"></span><span class="mord"><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.3757320000000002em;"><span style="top:-3.7743400000000005em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.06em;vertical-align:-0.31em;"></span><span class="mord">2</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault">s</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mord mathdefault">d</span><span class="mclose">)</span></span></span></span></span></p>
<h2 id="三-账单以谁为准"><a class="markdownIt-Anchor" href="#三-账单以谁为准"></a> 三、账单以谁为准？</h2>
<h3 id="31-工作量证明"><a class="markdownIt-Anchor" href="#31-工作量证明"></a> 3.1 工作量证明</h3>
<p>打包只能够以一个人为准，解决的办法叫做<strong>工作量证明</strong>，所有想要参与打包的用户（后文称其为<code>矿工</code>）都要去做一个非常复杂的数学运算，复杂到使用计算机都要运算非常久，谁<strong>最先</strong>计算出来谁就有权利去打包，也就能获得手续费奖励和打包奖励。计算这个数学题的过程，就被称为<code>挖矿</code>。</p>
<h3 id="32-挖矿的具体原理"><a class="markdownIt-Anchor" href="#32-挖矿的具体原理"></a> 3.2 挖矿的具体原理</h3>
<p>这个数学运算其实跟计算机中的 <code>SHA256</code> 哈希函数有关。哈希算法的特点，是<strong>正算容易、逆算困难</strong>，因此被广泛用户加密领域。而 SHA256 的特点是把任意大小的字符串参数，其哈希结果都是 256 位的二进制数，故得名 SHA256。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/posts/201911/201911080146348.png" alt="SHA256 算法" /></p>
<p>区块链本质上就是一个<strong>线性链表</strong>数据结构。通俗点说就是链上包含了所有的账单信息，这些账单信息分布在一个个区块上，每一个区块通过指针链接到它的前一个区块上。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/posts/201911/20191108012847894.png" alt="" /></p>
<p>下面开始具体说下挖矿的原理了，如果我想要打包一个区块，那么我需要准备好以下信息：</p>
<ul>
<li>目前区块链上最后一个区块的头部信息（便于链接）</li>
<li>收集到的尚未被打包的账单</li>
<li>开始打包的时间戳</li>
<li>一个随机字符串 x</li>
</ul>
<p>然后我们将以上的信息都拼接成一个字符串，对其连续做两次 SHA256 运算，会得到一个字符串结果 y。系统会告诉我们如果当前想要成功的打包区块，这个<strong>结果 y 需要满足前 n 位必须为 0</strong>。如果我们得到的这个结果 y 正好满足这个要求，你将最后算出来的这个 x，作为<strong>新块的头部</strong>，接到区块链最后面去。那么我们就<strong>打包成功</strong>了。</p>
<p>当然，想要满足结果 y 前 n 位必须为 0 的条件是异常苛刻的，在打包的区块信息中，能改变的就是那个随机字符串 x。通过让计算机进行穷举法去尝试那个 x 的值，直到试出一个满足条件的值。</p>
<p>另外，每个人在计算的时候的难度其实是不一样的，因为每个人打包的账单不同，开始的打包时间也不同。所以可能存在有人运气好，很快就算出结果，有人运气差，怎么都算不出来。</p>
<p>抛开运气，想要比别人更快的算出结果，就只能<strong>提高计算机的算力</strong>（运算速度），也就是我们经常听到的<strong>买矿机、买矿卡</strong>。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/posts/201911/20191108014814162.jpg" alt="矿机" /></p>
<h3 id="33-难度设置"><a class="markdownIt-Anchor" href="#33-难度设置"></a> 3.3 难度设置</h3>
<p>接上一节所说，计算成功的<strong>难度和 n 值是密切相关</strong>的。n 越小，难度也就越低，n 越大，难度也就越大。n 为 1 挖到概率是 1/2，n 为 2 挖到概率是 1/4，因此挖到的概率就是 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mrow><mo stretchy="false">(</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">)</mo></mrow><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">{(\frac{1}{2})}^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2444em;vertical-align:-0.345em;"></span><span class="mord"><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8994em;"><span style="top:-3.2980080000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>。</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac><mo>∗</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo>∗</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo>∗</mo><mo>…</mo><mfrac><mi>n</mi><mn>2</mn></mfrac><mo>=</mo><msup><mrow><mo stretchy="false">(</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">)</mo></mrow><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">\frac{1}{2} \ast \frac{1}{2} \ast \frac{1}{2} \ast … \frac{n}{2}  = {(\frac{1}{2})}^n
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.7935600000000003em;vertical-align:-0.686em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.10756em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.061732em;vertical-align:-0.686em;"></span><span class="mord"><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.3757320000000002em;"><span style="top:-3.7743400000000005em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>那么这个 n 是如何确定的呢？前面说到，打包奖励方案中规定<strong>每十分钟打出一个包</strong>，因此 n 会根据当前整个区块链的<strong>全网算力</strong>来动态调整的。</p>
<p>假设目前全网有一万台矿机，每台矿机的算力是 14T/s（每秒进行 14T 次哈希运算，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mi>T</mi><mo>=</mo><msup><mn>10</mn><mn>12</mn></msup></mrow><annotation encoding="application/x-tex">1T = {10}^{12}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.848448em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord">1</span><span class="mord">0</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.848448em;"><span style="top:-3.09734em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span>），计算可得十分钟全网能算 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>8.4</mn><mo>∗</mo><msup><mn>10</mn><mn>19</mn></msup></mrow><annotation encoding="application/x-tex">8.4 \ast {10}^{19}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span><span class="mord">.</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.848448em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord">1</span><span class="mord">0</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.848448em;"><span style="top:-3.09734em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span></span> 次。</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1.4</mn><mo>∗</mo><msup><mn>10</mn><mn>13</mn></msup><mo>∗</mo><mn>10000</mn><mo>∗</mo><mn>60</mn><mo>∗</mo><mn>10</mn><mo>=</mo><mn>8.4</mn><mo>∗</mo><msup><mn>10</mn><mn>19</mn></msup></mrow><annotation encoding="application/x-tex">1.4 \ast {10}^{13} \ast 10000 \ast 60 \ast 10 = 8.4 \ast {10}^{19}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord">1</span><span class="mord">0</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span><span class="mord">.</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord">1</span><span class="mord">0</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>又因为计算成功的概率是 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mrow><mo stretchy="false">(</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">)</mo></mrow><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">{(\frac{1}{2})}^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2444em;vertical-align:-0.345em;"></span><span class="mord"><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8994em;"><span style="top:-3.2980080000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>，也就是说平均的计算的次数要是 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>。那么 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>8.4</mn><mo>∗</mo><msup><mn>10</mn><mn>19</mn></msup></mrow><annotation encoding="application/x-tex">8.4 \ast {10}^{19}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span><span class="mord">.</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.848448em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord">1</span><span class="mord">0</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.848448em;"><span style="top:-3.09734em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span></span> 相当于 2 的多少次幂呢。</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>8.4</mn><mo>∗</mo><msup><mn>10</mn><mn>19</mn></msup><mo>≈</mo><msup><mn>2</mn><mn>66</mn></msup></mrow><annotation encoding="application/x-tex">8.4 \ast {10}^{19} \approx 2 ^ {66}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span><span class="mord">.</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord">1</span><span class="mord">0</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">9</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">6</span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>计算结果大致是 66，也就是说系统会将 n 的值设置为 66，第一个计算出结果前 66 位都为 0 的矿工，就有资格进行打包，俗称挖矿成功。</p>
<blockquote>
<p>闲扯下，如果你想更快的挖到矿，不考虑运气的话，你只能不停地买矿机提高算力。而其他矿工也是这样想的，导致全网算力提高，挖矿难度也随之增大，就是一个轮回啊。AMD 和 Nvidia 表示很开心。</p>
</blockquote>
<h2 id="四-如何防伪"><a class="markdownIt-Anchor" href="#四-如何防伪"></a> 四、如何防伪？</h2>
<p>如何保证比特币的交易记录是真实的，比特币是如何进行身份认证的？传统的身份认证方式包括：刷脸、签名、指纹等等。但是这些方式在电子支付系统中都不能实现，因为<strong>利用计算机系统都可以进行拷贝</strong>。比如拷贝下你的签名，然后添加到我伪造的记录上。</p>
<p>因此必须对传统的身份认证方式进行更改，比特币采用的身份认证方式叫做<strong>电子签名</strong>。</p>
<p>用户在创建比特币钱包时候，会生成一个随机数，根据这个随机数，会产生一个名为<code>私钥</code>的字符串。根据私钥字符串，又可以产生一个名为<code>公钥</code>的字符串，根据公钥产生你的比特币钱包地址。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/posts/201911/20191108014142435.png" alt="" /></p>
<p>私钥和公钥采用的是<code>非对称加密方式</code>，即通过私钥能够计算出公钥，但是通过公钥无法计算出私钥。<strong>私钥的作用是可以对一个字符串进行加密，而公钥的作用是可以对加密的字符串进行解密。</strong> 私钥私有，只有你能够加密。公钥公开，所有人都可以解密你加密后的信息。</p>
<p>私钥是十分重要的，<strong>如果私钥丢失或泄露，那么你钱包中的比特币就都丢了</strong>。公钥和地址都是对外公开的，当他人向你转账时，你需要提供地址即可；当你向他人转账时，需要提供公钥和地址。</p>
<p>假设A付给B 5 个比特币，首先A写一条 “A付给B 5 个比特币”这条记录，写完这条记录后，A将这条记录，利用 SHA256 算法进行哈希运算，得到一个字符串（称作<code>数字摘要</code>）。随后A利用自己的私钥对这个字符串进行加密，得到一个密文。</p>
<p>随后A对全网进行广播，告诉全网 “A付给B 5 个比特币”这条记录，然后将自己的公钥和加密后的密文一起广播出去。</p>
<p>其他人接收到这条广播后，需要验证这条消息的真实性。首先将 “A付给B 5 个比特币”这条记录进行SHA256 哈希运算，得到一个摘要1（这里的摘要1应该是和A自己计算的摘要是一致的），然后利用广播中的公钥将广播中的密文进行解密，得到摘要2。</p>
<p>前文说过，公钥作用是可以将私钥加密的字符串进行解密。因此如果消息真实，那么摘要1就会等于摘要2。如果计算结果不相等，那么就认为这条消息是伪造的，所有矿工都会拒绝这条记录。</p>
<h2 id="五-如何防止双重支付"><a class="markdownIt-Anchor" href="#五-如何防止双重支付"></a> 五、如何防止双重支付？</h2>
<h3 id="51-余额检查"><a class="markdownIt-Anchor" href="#51-余额检查"></a> 5.1 余额检查</h3>
<p>比特币进行余额检查最简单的方式是<strong>追溯</strong>，前面说过所有用户的比特币支付信息都会被记录在区块链上，那么当我接收到A的转出5个比特币的消息，就会顺着区块链的末端，向前一个区块一个区块的去查找你是否有足够多的余额去支付。</p>
<p>比如向前查找到你通过挖矿赚了6个比特币，那么就认为余额足够；如果不满足条件就继续向前找，直到满足条件，或者找到开头仍不满足。</p>
<p>其实目前已经不再采用这种方式进行余额检查，但那已经不在本文的探讨范围。</p>
<h3 id="52-双重支付"><a class="markdownIt-Anchor" href="#52-双重支付"></a> 5.2 双重支付</h3>
<p>如果用户A只有5个比特币，但他同时向全网广播了“支付给B 5 个比特币”、“支付给C 5 个比特币”这两条记录。那么到底转账给谁成功了了？如何防止这种双重支付问题呢？</p>
<p>前面说到，由于网络原因，每个矿工接受到的账单先后顺序是不同的。那么有些矿工可能先收到“支付给B 5 个比特币”，有些矿工先收到“支付给C 5 个比特币”，有些矿工可能同时收到这两条记录。</p>
<p>如果同时收到这两条记录的话，余额检查这一步就通过不了，记录会被拒绝。</p>
<p>如果只收到一条记录的话，首先余额检查通过，然后开始打包，进行挖矿。注意由于收到的顺序的不同，有的矿工打包的内容是“支付给B 5 个比特币”，有的矿工打包的是“支付给C 5 个比特币”。这都没有关系，因为只要没有人挖矿成功，这些区块都只存在本地，不会真的生效。</p>
<p>直到某个矿工打包成功了，他所打的区块被链接到区块链中，那么其他的打包者发现自己打的包中的记录已经被别人打到了区块链中，他就会主动放弃自己打的包。</p>
<p>也就是说，双重支付情况下，哪条支付记录先被打到区块链上，哪条支付就会生效，另一条支付就会因为余额不足而失效。</p>
<h2 id="六-如何防止篡改"><a class="markdownIt-Anchor" href="#六-如何防止篡改"></a> 六、如何防止篡改？</h2>
<h3 id="61-最长链原则"><a class="markdownIt-Anchor" href="#61-最长链原则"></a> 6.1 最长链原则</h3>
<p>前文说到，矿工将自己的收到的账单打包成区块后，开始挖矿。谁先挖到，谁就获得奖励，那么另外一个人其实就没有必要再挖了。但是有一些矿工就表示，我不管，我就要接着我的挖，我才不管你先挖到，最后还真让他给挖出来了，然后这个矿工也把他自己挖到的块链接到区块链上。那么<strong>此时的区块链就出现了分叉了，从一条链分叉成了两条链</strong>。其他的矿工就懵逼了，我现在打的包该链在谁的后面啊。</p>
<p>为了解决这个问题，区块链给出的原则是哪一条链最长，就以哪一条链为准，即<code>最长链原则</code>。</p>
<p>接着上面的例子，此时这两条分叉的链一样长，那么矿工就会随便选一条在后面挖矿。直到某个分叉上的矿工先挖出来了矿，那么此时分叉的链就不一样长了。此时另一个分叉的矿工们都会一溜烟的跑去最长的那个分叉上。</p>
<p>那一条短的分叉就被抛弃了，<strong>其上的所有区块的交易也都无效</strong>了。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/posts/201911/20191108015714103.jpg" alt="最长链原则" /></p>
<h3 id="62-51-攻击"><a class="markdownIt-Anchor" href="#62-51-攻击"></a> 6.2 51% 攻击</h3>
<p>前文在说“如何防伪”的时候说过，所有对外广播出去的账单记录，都会附带广播者的公钥和密文，来确保账单记录的真实。因此除非你拥有广播者的私钥，才能篡改其他广播者的账单记录。如果私钥丢失了，就没有必要去篡改了，毕竟整个钱包都能让你操作了。</p>
<p>既然不能篡改账单记录，那我能直接删掉记录吗？理论上是可以的，依据<strong>最长链原则</strong>。</p>
<p>比如我支付给某人5个比特币，这条记录广播出去，且被正式链到了区块链上，成为了最后一个区块。现在我想篡改掉，直接删除掉这条转账记录，如果真的让我删除成功了，我的余额就不变了。</p>
<p>由于这条记录已经被打包成了区块，记录到了区块链上，那么其他的矿工自然会在这个区块后面继续挖矿。而你由于想要篡改掉这条转账记录，你就必须把这个区块里的自己的转账记录删除掉，并重新打包区块，<strong>链接到最后一个区块的前一个，构造出一个分叉出</strong>来。</p>
<p>而在你删除记录、重新打包、挖矿、链接到最后一个区块的前一个区块的过程中。世界上除你以外的其他所有矿工，都在原本的链上继续往后挖。</p>
<p>依据最长链原则，你必须使得自己构造的分叉比原有链还要长，才会让其他矿工都到你构造的分叉链上来挖。如果你真的成功了，你也就篡改成功了。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/posts/201911/20191108015942331.jpg" alt="51% 攻击" /></p>
<p>区块链之所以这样设计，就是它相信，不怀好意者终究只是少数。除非你的算力超过世界上所有人，你才有希望使得你构造的分叉链超过原有链。</p>
<p>这也被称为<code>51% 攻击</code>，即发动全网 51% 的算力，去构造出一条分叉链，使得原有链分叉区块以后的交易全部失效。因此，如果掌握 51% 的算力，这条链也就被你所掌握了。</p>
<h2 id="七-区块链发展史"><a class="markdownIt-Anchor" href="#七-区块链发展史"></a> 七、区块链发展史</h2>
<ul>
<li><strong>2008 年</strong>
<ul>
<li>中本聪（Satoshi Nakamoto）是个人或团体的化名，他出版了“ 比特币：点对点电子现金系统”。</li>
</ul>
</li>
<li><strong>2009 年</strong>
<ul>
<li>首次成功的比特币（BTC）交易发生在计算机科学家 Hal Finney 和神秘的中本聪之间。</li>
</ul>
</li>
<li><strong>2010 年</strong>
<ul>
<li>佛罗里达州程序员 Laszlo Hanycez 完成了有史以来第一次使用比特币的交易——两份 Papa John’s 披萨。Hanycez 转移了 10,000 个BTC，当时价值约 60 美元，被称为史上最贵的披萨。</li>
<li>比特币的市值正式超过100万美元。</li>
</ul>
</li>
<li><strong>2011 年</strong>
<ul>
<li>1 BTC = 1 USD，给予与美元的加密货币平价。</li>
<li>电子前沿基金会，维基解密和其他组织开始接受比特币作为捐赠。</li>
</ul>
</li>
<li><strong>2012 年</strong>
<ul>
<li>在诸如《老婆婆》等热门电视节目中提到了区块链和加密货币，将区块链注入了流行文化。</li>
<li>早期比特币开发商 Vitalik Buterin 发行《比特币杂志》。</li>
</ul>
</li>
<li><strong>2013 年</strong>
<ul>
<li>BTC市值超过 10 亿美元。</li>
<li>比特币首次达到 100$ / BTC。</li>
<li>Buterin发表“ 以太坊项目 ”论文，暗示区块链除比特币外还有其他可能性（例如，智能合约）。</li>
</ul>
</li>
<li><strong>2014 年</strong>
<ul>
<li>游戏公司 Zynga，The D Las Vegas Hotel 和 <a target="_blank" rel="noopener" href="http://Overstock.com">Overstock.com</a> 都开始接受比特币付款。</li>
<li>Buterin 的以太坊项目通过首次代币发行（ICO）进行众筹，筹集了超过1800万美元的BTC资金，并为区块链开辟了新途径。</li>
<li>R3 由200多家区块链公司组成，旨在发现可以在技术中实施区块链的新方法。</li>
<li>PayPal 宣布整合比特币。</li>
</ul>
</li>
<li><strong>2015 年</strong>
<ul>
<li>接受 BTC 的商户数量超过 100,000。</li>
<li>纳斯达克和旧金山区块链公司 Chain 联手测试该技术以交易私人公司的股份。</li>
</ul>
</li>
<li><strong>2016 年</strong>
<ul>
<li>科技巨头 IBM 宣布了基于云的业务解决方案的区块链战略。</li>
<li>日本政府认识到区块链和加密货币的合法性。</li>
</ul>
</li>
<li><strong>2017 年</strong>
<ul>
<li>比特币首次达到 1,000$ / BTC。</li>
<li>加密货币市值达到 1500 亿美元。</li>
<li>摩根大通（JP Morgan）首席执行官杰米·戴蒙（Jamie Dimon）说，他相信区块链是一种未来技术，这使分类账系统获得了华尔街的信任。</li>
<li>比特币达到历史新高的 19,783.21$ / BTC。</li>
<li>迪拜宣布其政府将在2020年之前采用区块链技术。</li>
</ul>
</li>
<li><strong>2018 年</strong>
<ul>
<li>Facebook 致力于建立一个区块链组织，并暗示可能创建自己的加密货币。</li>
<li>IBM 开发了一个基于区块链的银行平台，并与 Citi 和 Barclays 等大型银行签约。</li>
</ul>
</li>
<li><strong>2019 年</strong>
<ul>
<li>央行表示将发行数字货币 DCEP，1 DCEP = 1 RMB。</li>
<li>Facebook 发行 Libra，遭遇国会质询。</li>
<li>中央表示要大力发展区块链技术，国家电网等区块链“国家队”进场。</li>
</ul>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Jitwxs</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://jitwxs.cn/b0727585.html">https://jitwxs.cn/b0727585.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://jitwxs.cn" target="_blank">Jitwxs</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/">区块链</a><a class="post-meta__tags" href="/tags/%E6%AF%94%E7%89%B9%E5%B8%81/">比特币</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover13.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/configuration/wechat_donate.png" target="_blank"><img class="post-qr-code-img" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/configuration/wechat_donate.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/configuration/alipay_donate.png" target="_blank"><img class="post-qr-code-img" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/configuration/alipay_donate.png" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/7dda603c.html"><img class="prev-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover11.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Gitmoji 速查指南</div></div></a></div><div class="next-post pull-right"><a href="/b4a74645.html"><img class="next-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover10.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">理解蓝绿发布、灰度发布和滚动发布</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/67173ef2.html" title="浅谈央行数字货币 DCEP"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover8.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-11-02</div><div class="title">浅谈央行数字货币 DCEP</div></div></a></div><div><a href="/fd57551a.html" title="深度解读央行数字货币 DCEP"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover11.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-11-03</div><div class="title">深度解读央行数字货币 DCEP</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/configuration/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Jitwxs</div><div class="author-info__description">不忘初心，砥砺前行</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">224</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">132</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">39</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/jitwxs"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/jitwxs" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=Ujg7JiUqIRI0PSo-Mzs_fDE9Pw" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a><a class="social-icon" href="https://jitwxs.blog.csdn.net" target="_blank" title="CSDN"><i class="fab fa-cuttlefish flat-btn"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">专注 Java 后端开发，内容涵盖 SpringBoot、并发编程、微服务、容器化、Linux 等技术分享。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E6%AF%94%E7%89%B9%E5%B8%81%E8%AF%9E%E7%94%9F"><span class="toc-text"> 一、比特币诞生</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%8E%BB%E8%AE%B0%E8%B4%A6"><span class="toc-text"> 二、为什么要去记账？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-%E8%B4%A6%E5%8D%95%E4%BB%A5%E8%B0%81%E4%B8%BA%E5%87%86"><span class="toc-text"> 三、账单以谁为准？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#31-%E5%B7%A5%E4%BD%9C%E9%87%8F%E8%AF%81%E6%98%8E"><span class="toc-text"> 3.1 工作量证明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#32-%E6%8C%96%E7%9F%BF%E7%9A%84%E5%85%B7%E4%BD%93%E5%8E%9F%E7%90%86"><span class="toc-text"> 3.2 挖矿的具体原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#33-%E9%9A%BE%E5%BA%A6%E8%AE%BE%E7%BD%AE"><span class="toc-text"> 3.3 难度设置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B-%E5%A6%82%E4%BD%95%E9%98%B2%E4%BC%AA"><span class="toc-text"> 四、如何防伪？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94-%E5%A6%82%E4%BD%95%E9%98%B2%E6%AD%A2%E5%8F%8C%E9%87%8D%E6%94%AF%E4%BB%98"><span class="toc-text"> 五、如何防止双重支付？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#51-%E4%BD%99%E9%A2%9D%E6%A3%80%E6%9F%A5"><span class="toc-text"> 5.1 余额检查</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#52-%E5%8F%8C%E9%87%8D%E6%94%AF%E4%BB%98"><span class="toc-text"> 5.2 双重支付</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD-%E5%A6%82%E4%BD%95%E9%98%B2%E6%AD%A2%E7%AF%A1%E6%94%B9"><span class="toc-text"> 六、如何防止篡改？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#61-%E6%9C%80%E9%95%BF%E9%93%BE%E5%8E%9F%E5%88%99"><span class="toc-text"> 6.1 最长链原则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#62-51-%E6%94%BB%E5%87%BB"><span class="toc-text"> 6.2 51% 攻击</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83-%E5%8C%BA%E5%9D%97%E9%93%BE%E5%8F%91%E5%B1%95%E5%8F%B2"><span class="toc-text"> 七、区块链发展史</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/e4d53ddb.html" title="Spring SchedulingConfigurer 实现动态定时任务"><img data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring SchedulingConfigurer 实现动态定时任务"/></a><div class="content"><a class="title" href="/e4d53ddb.html" title="Spring SchedulingConfigurer 实现动态定时任务">Spring SchedulingConfigurer 实现动态定时任务</a><time datetime="2021-03-27T15:23:41.000Z" title="发表于 2021-03-27 23:23:41">2021-03-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/9f878221.html" title="Java 双亲委派机制"><img data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java 双亲委派机制"/></a><div class="content"><a class="title" href="/9f878221.html" title="Java 双亲委派机制">Java 双亲委派机制</a><time datetime="2021-03-14T03:26:34.000Z" title="发表于 2021-03-14 11:26:34">2021-03-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/bef70352.html" title="图解 | 你管这破玩意儿叫TCP？"><img data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="图解 | 你管这破玩意儿叫TCP？"/></a><div class="content"><a class="title" href="/bef70352.html" title="图解 | 你管这破玩意儿叫TCP？">图解 | 你管这破玩意儿叫TCP？</a><time datetime="2021-01-24T07:19:23.000Z" title="发表于 2021-01-24 15:19:23">2021-01-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/c376af5e.html" title="图解 | 你管这破玩意叫线程池？"><img data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover21.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="图解 | 你管这破玩意叫线程池？"/></a><div class="content"><a class="title" href="/c376af5e.html" title="图解 | 你管这破玩意叫线程池？">图解 | 你管这破玩意叫线程池？</a><time datetime="2021-01-23T11:23:54.000Z" title="发表于 2021-01-23 19:23:54">2021-01-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/93fdc2b.html" title="如果让你来设计网络"><img data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover1.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如果让你来设计网络"/></a><div class="content"><a class="title" href="/93fdc2b.html" title="如果让你来设计网络">如果让你来设计网络</a><time datetime="2021-01-23T07:39:03.000Z" title="发表于 2021-01-23 15:39:03">2021-01-23</time></div></div></div></div></div></div></main><footer id="footer" style="background: linear-gradient(135deg,"><div id="footer-wrap"><div class="copyright">&copy;2016 - 2021 By Jitwxs</div><div class="footer_custom_text"><a target="_blank" rel="noopener" href='http://www.beian.miit.gov.cn/state/outPortal/loginPortal.action'><img class='icp-icon entered loading' src='/img/icp.png' alt='ICP' data-ll-status='loading'>苏 ICP 备 16061429 号</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.css"><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', '', 'katex-wrap')
  })
})()</script><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    let id = md5(decodeURI(window.location.pathname));
    var gitalk = new Gitalk(Object.assign({
      clientID: '1abf6b8c844664e07e3e',
      clientSecret: '49e497f91b34805a5d19dd73b6d4493d84020782',
      repo: 'blog-comment',
      owner: 'jitwxs',
      admin: ['jitwxs'],
      id: id,
      language: 'en',
      perPage: 10,
      distractionFreeMode: false,
      pagerDirection: 'last',
      createIssueManually: false,
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const findTrueUrl = (array) => {
    let url = ''
    Promise.all(array.map(item =>
      fetch(item.url).then(resp => resp.json()).then(data => {
        if (data.user.login === 'utterances-bot') {
          url = data.body.match(/https?\:\/\/[^\" ]+/ig).slice(-1)
          return url[0]
        } else {
          url = data.body.match(/https?\:\/\/[^\" ]+/i)
          return url[0]
        }
      })
    )).then(res => {
        array = array.map((i,index)=> {
          return {
            ...i,
            url: res[index]
          }
        })

        saveToLocal.set('github-newest-comments', JSON.stringify(array), 10/(60*24))
        generateHtml(array)
    });
  }

  const getComment = () => {
    fetch('https://api.github.com/repos/jitwxs/blog-comment/issues/comments?sort=updated&direction=desc&per_page=6&page=1',{
      "headers": {
        Accept: 'application/vnd.github.v3.html+json'
      }
    })
      .then(response => response.json())
      .then(data => {
        const githubArray = data.map(item => {
          return {
            'avatar': item.user.avatar_url,
            'content': changeContent(item.body_html),
            'nick': item.user.login,
            'url': item.issue_url,
            'date': item.updated_at,
            'githubUrl': item.html_url
          }
        })
        findTrueUrl(githubArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('github-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="5273081683" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" data-lrctype="1" muted></div><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.17.0/js/md5.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: true,
  scrollRestoration: false
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', 'G-40VH67TNSM', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})


document.addEventListener('pjax:send', function () {
  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>